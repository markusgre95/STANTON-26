<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Skiurlaub St. Anton 2026</title>

<style>
body {
  margin: 0;
  font-family: 'Segoe UI', sans-serif;
  background: linear-gradient(to bottom, #0f2027, #203a43, #2c5364);
  color: white;
  text-align: center;
  overflow-x: hidden;
}

header { padding: 30px 20px; }

h1 { font-size: 2em; margin-bottom: 10px; }

.subtitle { font-size: 1.1em; opacity: 0.9; }

.section { padding: 20px; }

.main-btn {
  margin: 10px;
  padding: 15px 25px;
  border-radius: 30px;
  border: none;
  font-size: 1.1em;
  cursor: pointer;
  background: white;
  color: #203a43;
}

.member-card, .vote-section {
  display: none;
  background: rgba(255,255,255,0.1);
  margin: 20px;
  padding: 20px;
  border-radius: 20px;
  backdrop-filter: blur(8px);
  transition: transform 0.3s ease, opacity 0.3s ease;
}

.member-card img {
  width: 100%;
  max-width: 250px;
  border-radius: 20px;
  margin-bottom: 15px;
}

.nav-btn {
  position: fixed;
  bottom: 20px;
  padding: 10px 15px;
  border-radius: 30px;
  border: none;
  font-size: 0.85em;
  cursor: pointer;
  background: white;
  color: #203a43;
  display: none;
}

#prevBtn { left: 20px; }
#nextBtn { right: 20px; }
#homeBtn { left: 50%; transform: translateX(-50%); }

.vote-section button {
  margin: 5px;
  padding: 10px 15px;
  border-radius: 20px;
  border: none;
  cursor: pointer;
  background: white;
  color: #203a43;
}

.reset-btn {
  margin-top: 20px;
  background: crimson;
  color: white;
}
</style>
</head>

<body>

<header>
  <h1>Skiurlaub St. Anton ‚õ∑Ô∏è</h1>
  <div class="subtitle">
    6 Skihaserl. Eine Mission. Unvergessliche Tage.
  </div>
</header>

<div class="section" id="intro">
  <p>
    Seit mehreren Jahren fahren wir gemeinsam los ‚Äì  
    Marius, Heinrich, Jonas, Nico, Markus und Newbie Jascha
  </p>
  <p>
    Dieses Jahr Vollgas in <strong>St. Anton</strong> üçªüî•
  </p>

  <button class="main-btn" onclick="startTeam()">Das Team</button>
  <button class="main-btn" onclick="showVoting()">üèÜ MVP Voting</button>
</div>

<div class="member-card" id="memberCard">
  <img id="memberImg" src="">
  <h2 id="memberName"></h2>
  <p id="memberText"></p>
  <p style="font-size:0.8em; opacity:0.7;">‚¨ÖÔ∏è Swipe links / rechts ‚û°Ô∏è</p>
</div>

<div class="vote-section" id="voteSection">
  <h2>üèÜ MVP ‚Äì K√∂nig von St. Anton</h2>
  <div id="voteButtons"></div>
  <div id="chart"></div>
  <button class="reset-btn" onclick="adminReset()">üîí Admin Reset</button>
</div>

<button class="nav-btn" id="prevBtn" onclick="prevMember()">‚¨ÖÔ∏è</button>
<button class="nav-btn" id="homeBtn" onclick="goHome()">üè†</button>
<button class="nav-btn" id="nextBtn" onclick="nextMember()">‚û°Ô∏è</button>

<script>
const members = [
  { name: "Marius", img: "marius.jpg", text: "Maschine auf der Piste." },
  { name: "Heinrich", img: "heinrich.jpg", text: "Techniker mit Stil." },
  { name: "Jascha", img: "jascha.jpg", text: "Apres Ski Instructor!" },
  { name: "Jonas", img: "jonas.jpg", text: "Skihaserl auf & neben der Piste." },
  { name: "Nico", img: "nico.jpg", text: "Hauptsache Vollgas." },
  { name: "Markus", img: "markus.jpg", text: "Pistenprinzessin." }
];

let currentIndex = 0;

/* TEAM */
function startTeam() {
  hideAll();
  document.getElementById("memberCard").style.display = "block";
  document.getElementById("prevBtn").style.display = "block";
  document.getElementById("nextBtn").style.display = "block";
  document.getElementById("homeBtn").style.display = "block";
  showMember();
}

function showMember() {
  const m = members[currentIndex];
  document.getElementById("memberImg").src = m.img;
  document.getElementById("memberName").innerText = m.name;
  document.getElementById("memberText").innerText = m.text;
}

function nextMember() {
  currentIndex = (currentIndex + 1) % members.length;
  showMember();
}

function prevMember() {
  currentIndex = (currentIndex - 1 + members.length) % members.length;
  showMember();
}

/* SWIPE */
let touchStartX = 0;
let touchEndX = 0;

const memberCard = document.getElementById("memberCard");

memberCard.addEventListener("touchstart", e => {
  touchStartX = e.changedTouches[0].screenX;
});

memberCard.addEventListener("touchend", e => {
  touchEndX = e.changedTouches[0].screenX;
  handleSwipe();
});

function handleSwipe() {
  if (touchEndX < touchStartX - 50) nextMember();
  if (touchEndX > touchStartX + 50) prevMember();
}

/* VOTING */
let votes = JSON.parse(localStorage.getItem("mvpVotes")) || {};
members.forEach(m => { if (!votes[m.name]) votes[m.name] = 0; });
let hasVoted = localStorage.getItem("hasVoted") === "true";

function showVoting() {
  hideAll();
  document.getElementById("voteSection").style.display = "block";
  document.getElementById("homeBtn").style.display = "block";
  renderVoting();
}

function renderVoting() {
  const container = document.getElementById("voteButtons");
  container.innerHTML = "";

  members.forEach(member => {
    const btn = document.createElement("button");
    btn.innerText = member.name;
    btn.disabled = hasVoted;
    btn.onclick = () => vote(member.name);
    container.appendChild(btn);
  });

  renderChart();
}

function vote(name) {
  if (hasVoted) return;
  votes[name]++;
  hasVoted = true;
  localStorage.setItem("mvpVotes", JSON.stringify(votes));
  localStorage.setItem("hasVoted", "true");
  renderVoting();
}

function renderChart() {
  const chart = document.getElementById("chart");
  chart.innerHTML = "";
  const maxVotes = Math.max(...Object.values(votes), 1);

  members.forEach(member => {
    const wrapper = document.createElement("div");
    wrapper.style.margin = "10px 0";
    wrapper.style.textAlign = "left";

    const label = document.createElement("div");
    label.innerText = member.name + " (" + votes[member.name] + ")";
    label.style.fontSize = "0.9em";

    const bar = document.createElement("div");
    bar.style.height = "20px";
    bar.style.width = "0%";
    bar.style.background = "white";
    bar.style.borderRadius = "10px";
    bar.style.transition = "width 0.8s ease";

    wrapper.appendChild(label);
    wrapper.appendChild(bar);
    chart.appendChild(wrapper);

    setTimeout(() => {
      bar.style.width = (votes[member.name] / maxVotes * 100) + "%";
    }, 100);
  });
}

function adminReset() {
  if (confirm("Alle Stimmen zur√ºcksetzen?")) {
    localStorage.clear();
    location.reload();
  }
}

function goHome() {
  hideAll();
  document.getElementById("intro").style.display = "block";
}

function hideAll() {
  document.getElementById("intro").style.display = "none";
  document.getElementById("memberCard").style.display = "none";
  document.getElementById("voteSection").style.display = "none";
  document.getElementById("prevBtn").style.display = "none";
  document.getElementById("nextBtn").style.display = "none";
  document.getElementById("homeBtn").style.display = "none";
}
</script>

</body>
</html>
