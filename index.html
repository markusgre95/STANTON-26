<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Skiurlaub St. Anton 2026</title>

<style>
body {
  margin: 0;
  font-family: 'Segoe UI', sans-serif;
  background: linear-gradient(to bottom, #0f2027, #203a43, #2c5364);
  color: white;
  text-align: center;
  overflow-x: hidden;
}

header { padding: 30px 20px; }

h1 { font-size: 2em; margin-bottom: 10px; }

.subtitle { font-size: 1.1em; opacity: 0.9; }

.section { padding: 20px; }

.main-btn {
  margin: 10px;
  padding: 15px 25px;
  border-radius: 30px;
  border: none;
  font-size: 1.05em;
  cursor: pointer;
  background: white;
  color: #203a43;
}

.member-card, .vote-section, .diary-section {
  display: none;
  background: rgba(255,255,255,0.1);
  margin: 20px;
  padding: 20px;
  border-radius: 20px;
  backdrop-filter: blur(8px);
}

.member-card img {
  width: 100%;
  max-width: 250px;
  border-radius: 20px;
  margin-bottom: 15px;
}

textarea {
  width: 100%;
  min-height: 120px;
  border-radius: 15px;
  border: none;
  padding: 10px;
  font-family: inherit;
  margin-top: 10px;
}

.save-btn {
  margin-top: 10px;
  padding: 10px 20px;
  border-radius: 20px;
  border: none;
  cursor: pointer;
  background: white;
  color: #203a43;
}

.nav-btn {
  position: fixed;
  bottom: 20px;
  padding: 10px 15px;
  border-radius: 30px;
  border: none;
  font-size: 0.85em;
  cursor: pointer;
  background: white;
  color: #203a43;
  display: none;
}

#prevBtn { left: 20px; }
#nextBtn { right: 20px; }
#homeBtn { left: 50%; transform: translateX(-50%); }

.reset-btn {
  margin-top: 20px;
  background: crimson;
  color: white;
}

/* Neue Styles fÃ¼r Tagebuchkarten */
#allDiaries {
  margin-top: 20px;
  display: flex;
  flex-wrap: wrap;
  gap: 15px;
  justify-content: center;
}

.diary-card {
  background: rgba(255,255,255,0.1);
  backdrop-filter: blur(8px);
  border-radius: 15px;
  padding: 15px;
  max-width: 220px;
  flex: 1 1 200px;
  text-align: left;
  transition: transform 0.2s;
}

.diary-card:hover {
  transform: translateY(-5px);
}

.diary-card strong {
  display: block;
  margin-bottom: 8px;
}
</style>
</head>

<body>

<header>
  <h1>Skiurlaub St. Anton â›·ï¸</h1>
  <div class="subtitle">
    6 Skihaserl. Eine Mission. Unvergessliche Tage.
  </div>
</header>

<div class="section" id="intro">
  <p>
    Seit mehreren Jahren fahren wir gemeinsam los â€“  
    Marius, Heinrich, Jonas, Nico, Markus und Newbie Jascha
  </p>
  <p>
    Dieses Jahr Vollgas in <strong>St. Anton</strong> ğŸ»ğŸ”¥
  </p>

  <button class="main-btn" onclick="startTeam()">Das Team</button>
  <button class="main-btn" onclick="showVoting()">ğŸ† MVP Voting</button>
  <button class="main-btn" onclick="showDiary()">ğŸ“ Skihaserl Tagebuch</button>
</div>

<!-- TEAM -->
<div class="member-card" id="memberCard">
  <img id="memberImg" src="">
  <h2 id="memberName"></h2>
  <p id="memberText"></p>
  <p style="font-size:0.8em; opacity:0.7;">â¬… Swipe â¡</p>
</div>

<!-- VOTING -->
<div class="vote-section" id="voteSection">
  <h2>ğŸ† MVP â€“ KÃ¶nig von St. Anton</h2>
  <div id="voteButtons"></div>
  <div id="chart"></div>
  <button class="reset-btn" onclick="adminReset()">ğŸ”’ Admin Reset</button>
</div>

<!-- TAGEBUCH -->
<div class="diary-section" id="diarySection">
  <h2>ğŸ“ Skihaserl Tagebuch</h2>
  <select id="diarySelect" onchange="loadDiary()"></select>
  <textarea id="diaryText" placeholder="Was ist heute passiert? ğŸ»â›·ï¸"></textarea>
  <button class="save-btn" onclick="saveDiary()">Speichern</button>
  <p id="saveMessage"></p>
  <div id="allDiaries"></div>
</div>

<!-- NAV -->
<button class="nav-btn" id="prevBtn" onclick="prevMember()">â¬…ï¸</button>
<button class="nav-btn" id="homeBtn" onclick="goHome()">ğŸ </button>
<button class="nav-btn" id="nextBtn" onclick="nextMember()">â¡ï¸</button>

<script>
const members = [
  { name: "Marius", img: "marius.jpg", text: "Maschine auf der Piste." },
  { name: "Heinrich", img: "heinrich.jpg", text: "Techniker mit Stil." },
  { name: "Jascha", img: "jascha.jpg", text: "Apres Ski Instructor!" },
  { name: "Jonas", img: "jonas.jpg", text: "Skihaserl auf & neben der Piste." },
  { name: "Nico", img: "nico.jpg", text: "Hauptsache Vollgas." },
  { name: "Markus", img: "markus.jpg", text: "Pistenprinzessin." }
];

let currentIndex = 0;

/* Navigation */
function hideAll() {
  document.getElementById("intro").style.display = "none";
  document.getElementById("memberCard").style.display = "none";
  document.getElementById("voteSection").style.display = "none";
  document.getElementById("diarySection").style.display = "none";
  document.getElementById("prevBtn").style.display = "none";
  document.getElementById("nextBtn").style.display = "none";
  document.getElementById("homeBtn").style.display = "none";
}

function goHome() {
  hideAll();
  document.getElementById("intro").style.display = "block";
}

/* TEAM */
function startTeam() {
  hideAll();
  document.getElementById("memberCard").style.display = "block";
  document.getElementById("prevBtn").style.display = "block";
  document.getElementById("nextBtn").style.display = "block";
  document.getElementById("homeBtn").style.display = "block";
  showMember();
}

function showMember() {
  const m = members[currentIndex];
  memberImg.src = m.img;
  memberName.innerText = m.name;
  memberText.innerText = m.text;
}

function nextMember() {
  currentIndex = (currentIndex + 1) % members.length;
  showMember();
}

function prevMember() {
  currentIndex = (currentIndex - 1 + members.length) % members.length;
  showMember();
}

/* SWIPE */
let startX = 0;
memberCard.addEventListener("touchstart", e => startX = e.changedTouches[0].screenX);
memberCard.addEventListener("touchend", e => {
  let endX = e.changedTouches[0].screenX;
  if (endX < startX - 50) nextMember();
  if (endX > startX + 50) prevMember();
});

/* VOTING */
let votes = JSON.parse(localStorage.getItem("mvpVotes")) || {};
members.forEach(m => { if (!votes[m.name]) votes[m.name] = 0; });
let hasVoted = localStorage.getItem("hasVoted") === "true";

function showVoting() {
  hideAll();
  voteSection.style.display = "block";
  homeBtn.style.display = "block";
  renderVoting();
}

function renderVoting() {
  voteButtons.innerHTML = "";
  members.forEach(member => {
    const btn = document.createElement("button");
    btn.innerText = member.name;
    btn.disabled = hasVoted;
    btn.onclick = () => vote(member.name);
    voteButtons.appendChild(btn);
  });
  renderChart();
}

function vote(name) {
  if (hasVoted) return;
  votes[name]++;
  hasVoted = true;
  localStorage.setItem("mvpVotes", JSON.stringify(votes));
  localStorage.setItem("hasVoted", "true");
  renderVoting();
}

function renderChart() {
  chart.innerHTML = "";
  const maxVotes = Math.max(...Object.values(votes), 1);
  members.forEach(member => {
    const label = document.createElement("div");
    label.innerText = member.name + " (" + votes[member.name] + ")";
    const bar = document.createElement("div");
    bar.style.height = "18px";
    bar.style.background = "white";
    bar.style.width = (votes[member.name] / maxVotes * 100) + "%";
    bar.style.marginBottom = "8px";
    chart.appendChild(label);
    chart.appendChild(bar);
  });
}

function adminReset() {
  if (confirm("Alle Stimmen lÃ¶schen?")) {
    localStorage.removeItem("mvpVotes");
    localStorage.removeItem("hasVoted");
    location.reload();
  }
}

/* TAGEBUCH */
function showDiary() {
  hideAll();
  diarySection.style.display = "block";
  homeBtn.style.display = "block";

  diarySelect.innerHTML = "";
  members.forEach(member => {
    const option = document.createElement("option");
    option.value = member.name;
    option.text = member.name;
    diarySelect.appendChild(option);
  });

  loadDiary();
  renderAllDiaries();
}

function loadDiary() {
  const name = diarySelect.value;
  diaryText.value = localStorage.getItem("diary_" + name) || "";
}

function saveDiary() {
  const name = diarySelect.value;
  localStorage.setItem("diary_" + name, diaryText.value);
  saveMessage.innerText = "Gespeichert âœ…";
  renderAllDiaries();
  setTimeout(()=> saveMessage.innerText = "", 2000);
}

// Neue Funktion: zeigt alle Notizen als Karten
function renderAllDiaries() {
  const container = document.getElementById("allDiaries");
  container.innerHTML = "";
  members.forEach(member => {
    const note = localStorage.getItem("diary_" + member.name) || "(noch keine Notiz)";
    const div = document.createElement("div");
    div.className = "diary-card";
    div.innerHTML = `<strong>${member.name}:</strong> ${note.replace(/\n/g, "<br>")}`;
    container.appendChild(div);
  });
}
</script>

</body>
</html>
